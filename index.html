<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mato Real Manager v1.42.3</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        :root { --bg-dark: #121212; --bg-card: #1E1E1E; --bg-input: #2C2C2C; --primary: #00E676; --secondary: #2979FF; --danger: #FF1744; --warning: #FFC400; --purple: #D500F9; --text-main: #FFFFFF; --border: #333333; }
        body { background: var(--bg-dark); color: var(--text-main); font-family: 'Roboto', sans-serif; margin: 0; padding-bottom: 80px; -webkit-font-smoothing: antialiased; }
        .container { max-width: 800px; margin: 0 auto; padding: 15px; }
        .card { background: var(--bg-card); padding: 15px; border-radius: 12px; margin-bottom: 12px; border: 1px solid var(--border); box-shadow: 0 4px 6px rgba(0,0,0,0.4); position: relative; }
        .btn { width: 100%; padding: 12px; border-radius: 8px; border: none; font-weight: 800; cursor: pointer; text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; transition: 0.2s; margin-bottom: 5px; color: white; }
        .btn:active { transform: scale(0.98); }
        .btn-green { background: var(--primary); color: #000; } .btn-blue { background: var(--secondary); } .btn-red { background: var(--danger); } .btn-gold { background: var(--warning); color: #000; } .btn-purple { background: var(--purple); }
        .btn-ghost { background: transparent; border: 1px solid #666; color: #ccc; }
        .input-field { width: 100%; padding: 12px; background: var(--bg-input); border: 1px solid var(--border); color: white; border-radius: 8px; margin-bottom: 10px; box-sizing: border-box; font-family: inherit; font-size: 14px; }
        .header { background: rgba(30, 30, 30, 0.95); backdrop-filter: blur(10px); padding: 15px; position: sticky; top: 0; z-index: 50; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .badge-pos { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: 900; margin-right: 8px; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
        .player-ov { background: #003300; color: #00E676; border: 1px solid #00E676; padding: 2px 6px; border-radius: 4px; font-weight: 900; font-size: 14px; }
        .news-card { background: #262626; padding: 12px; border-radius: 8px; margin-bottom: 8px; border-left: 4px solid #666; font-size: 13px; line-height: 1.4; white-space: pre-wrap; }
        .news-transfer { border-color: var(--secondary); background: linear-gradient(90deg, #1a1a2e, #16213e); }
        .news-money { border-color: var(--primary); } .news-money-minus { border-color: var(--danger); } .news-admin { border-color: var(--warning); background: #2a2000; } .news-press { border-color: #00bcd4; background: #003333; } .news-product { border-color: #E91E63; background: #280b18; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: #1a1a1a; border-top: 1px solid var(--border); display: flex; padding-bottom: env(safe-area-inset-bottom); z-index: 100; }
        .nav-item { flex: 1; padding: 12px; text-align: center; color: #666; font-size: 9px; cursor: pointer; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 20px; margin-bottom: 4px; display: block; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 999; display: grid; place-items: center; padding: 15px; backdrop-filter: blur(5px); }
        .modal-content { background: var(--bg-card); width: 100%; max-width: 450px; padding: 20px; border-radius: 12px; border: 1px solid var(--border); max-height: 90vh; overflow-y: auto; }
        .login-tabs { display: flex; border-bottom: 1px solid #333; margin-bottom: 20px; }
        .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; color: #666; font-weight: bold; }
        .tab.active { color: var(--primary); border-bottom: 3px solid var(--primary); }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .rating-badge { color: var(--warning); font-weight: bold; font-size: 11px; margin-left: 5px; display: flex; align-items: center; gap: 2px; text-shadow: 0 1px 2px black; }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; font-size: 10px; margin-top: 10px; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 8px; }
        .stat-item { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .stat-lbl { font-size: 14px; margin-bottom: 2px; } .stat-val { color: #fff; font-weight: 900; font-size: 11px; }
        .dev-credits { font-size: 10px; color: #666; margin-top: -5px; margin-bottom: 15px; text-align: center; display: block; width: 100%; }
        .error-screen { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #220000; color: #ff5555; padding: 20px; text-align: center; word-break: break-all; }
        .rank-tabs { display: flex; gap: 8px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 10px; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
        .rank-tabs::-webkit-scrollbar { display: none; }
        .rank-tab { background: #333; border: 1px solid #444; color: #888; padding: 8px 16px; border-radius: 20px; font-size: 12px; white-space: nowrap; cursor: pointer; transition: 0.2s; font-weight: bold; display: flex; align-items: center; gap: 5px; }
        .rank-tab.active { background: var(--primary); color: #000; border-color: var(--primary); box-shadow: 0 0 10px rgba(0,230,118,0.3); }
        .highlight-card { background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%); border: 1px solid var(--secondary); padding: 20px; text-align: center; margin-bottom: 15px; border-radius: 12px; position: relative; overflow: hidden; }
        .highlight-card::after { content: '‚òÖ'; position: absolute; top: -10px; right: -10px; font-size: 100px; color: rgba(255,255,255,0.05); }
        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .product-card { background: #222; border-radius: 8px; overflow: hidden; border: 1px solid #444; text-align: center; }
        .product-img { width: 100%; height: 100px; object-fit: cover; }
        .product-info { padding: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // GLOBAL CONSTANTS
        const POS = ['GOL', 'ZAG', 'LD', 'LE', 'VOL', 'MC', 'MEI', 'ATA'];
        const SERIES = ['A', 'B', 'C', 'D'];
        const COSTS = [0, 5000000, 20000000, 50000000, 100000000];
        const COMPANY_TYPES = { 'LARGE': { label: 'üè¢ Grande Empresa', initial: 500000000, tax: 20000000 }, 'MEDIUM': { label: 'üè≠ M√©dia Empresa', initial: 100000000, tax: 2000000 }, 'COMMERCE': { label: 'üè™ Com√©rcio Local', initial: 10000000, tax: 100000 } };
        const fmt = (v) => "‚Ç£ " + parseFloat(v||0).toLocaleString('pt-BR');
        const getPosColor = (p) => { if(!p) return '#555'; if(p==='GOL') return '#FFD700'; if(['ZAG','LD','LE'].some(x=>p.includes(x))) return '#2979FF'; if(['VOL','MC','MEI'].some(x=>p.includes(x))) return '#00E676'; return '#FF1744'; };

        class ErrorBoundary extends React.Component {
            constructor(props) { super(props); this.state = { hasError: false, error: null }; }
            static getDerivedStateFromError(error) { return { hasError: true, error }; }
            componentDidCatch(error, errorInfo) { console.error("Crash:", error, errorInfo); }
            render() { if (this.state.hasError) return <div className="error-screen"><h2>Erro Cr√≠tico</h2><p>{this.state.error?.toString()}</p><button className="btn btn-red" onClick={()=>{localStorage.clear(); window.location.reload();}}>REINICIAR</button></div>; return this.props.children; }
        }

        const firebaseConfig = { apiKey: "AIzaSyBrtJFfWAqT0AZYHlm4it-noB5h9jIPJEI", authDomain: "gerenciador-de-times-matoreal.firebaseapp.com", projectId: "gerenciador-de-times-matoreal", storageBucket: "gerenciador-de-times-matoreal.firebasestorage.app", messagingSenderId: "29096266740", appId: "1:29096266740:web:ec48e7225c18c20dbc07a1" };
        try { if (!firebase.apps.length) firebase.initializeApp(firebaseConfig); } catch (e) { console.error(e); }
        const db = firebase.firestore();
        const { useState, useEffect } = React;

        function App() {
            const [user, setUser] = useState(null); 
            const [teams, setTeams] = useState([]);
            const [players, setPlayers] = useState([]);
            const [offers, setOffers] = useState([]);
            const [news, setNews] = useState([]);
            const [reqs, setReqs] = useState([]);
            const [conf, setConf] = useState({ marketOpen: true });
            const [papers, setPapers] = useState([]);
            const [journalists, setJournalists] = useState([]);
            const [companies, setCompanies] = useState([]);
            const [sponReqs, setSponReqs] = useState([]);
            const [products, setProducts] = useState([]);
            const [screen, setScreen] = useState('HOME');
            const [modal, setModal] = useState(null);
            const [loading, setLoading] = useState(true);
            const [adminTeam, setAdminTeam] = useState(null); 

            useEffect(() => {
                const unsubs = [
                    db.collection('teams').onSnapshot(s => setTeams(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('players').onSnapshot(s => setPlayers(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('config').doc('system').onSnapshot(s => setConf(s.exists ? s.data() : {marketOpen:true})),
                    db.collection('financeRequests').onSnapshot(s => setReqs(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('newspapers').onSnapshot(s => setPapers(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('journalists').onSnapshot(s => setJournalists(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('companies').onSnapshot(s => setCompanies(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('sponRequests').onSnapshot(s => setSponReqs(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('products').orderBy('date', 'desc').onSnapshot(s => setProducts(s.docs.map(d => ({id:d.id, ...d.data()})))),
                    db.collection('news').orderBy('date', 'desc').limit(50).onSnapshot(s => { const list = s.docs.map(d => ({id:d.id, ...d.data()})); setNews(list); setLoading(false); })
                ];
                return () => unsubs.forEach(u => u());
            }, []);

            useEffect(() => {
                if (user?.type === 'USER') { const me = teams.find(t => t.id === user.data.id); if (me) setUser(prev => ({...prev, data: me})); return db.collection('offers').where('sellerId', '==', user.data.id).onSnapshot(s => setOffers(s.docs.map(d => ({id:d.id, ...d.data()})))); }
                if (user?.type === 'COMPANY') { const me = companies.find(c => c.id === user.data.id); if (me) setUser(prev => ({...prev, data: me})); }
            }, [teams, companies, user?.data?.id]);

            const postNews = (text, type='normal') => db.collection('news').add({ text, type, date: Date.now() });

            const login = (id, pwd, type) => {
                if (type === 'TEAM') { const t = teams.find(x => x.id === id); if (t && t.password === pwd) { if (t.status === 'PENDING') alert("Aguarde a Federa√ß√£o."); else { setUser({type:'USER', data:t}); setScreen('HOME'); } } else alert("Erro!"); } 
                else if (type === 'PAPER') { const p = papers.find(x => x.id === id); if (p && p.password === pwd) { if (p.status === 'PENDING') alert("Aguarde a Federa√ß√£o."); else { setUser({type:'PRESS', data:p}); setScreen('PRESS_DASH'); } } else alert("Erro!"); } 
                else if (type === 'JOURNALIST') { const j = journalists.find(x => x.id === id); if (j && j.password === pwd) { if (j.status === 'PENDING') alert("Aguarde o Dono."); else { setUser({type:'PRESS_WORKER', data:j}); setScreen('PRESS_DASH'); } } else alert("Erro!"); }
                else if (type === 'COMPANY') { const c = companies.find(x => x.id === id); if (c && c.password === pwd) { if (c.status === 'PENDING') alert("Aguarde a Federa√ß√£o."); else { setUser({type:'COMPANY', data:c}); setScreen('COMPANY_DASH'); } } else alert("Erro!"); }
            };
            const loginAdmin = () => { setUser({ type: 'ADMIN', data: { id: 'admin', name: 'FEDERA√á√ÉO (ADM)', balance: 0, logo: null } }); setScreen('HOME'); };

            const createTeam = async (name, bal, serie, pass, logo) => { if(teams.find(t=>t.name.toLowerCase()===name.toLowerCase())) return alert("Nome em uso!"); await db.collection('teams').add({ name, balance: parseFloat(bal), serie, password: pass, stadiumLevel: 1, logo: logo||null, status: 'PENDING' }); alert("Criado! Aguarde."); };
            const createNewspaper = async (name, pass, owner) => { await db.collection('newspapers').add({ name, password: pass, ownerName: owner, status: 'PENDING' }); alert("Criado! Aguarde."); };
            const createJournalist = async (name, pass, paperId) => { await db.collection('journalists').add({ name, password: pass, newspaperId: paperId, status: 'PENDING' }); alert("Criado! Aguarde."); };
            const createCompany = async (name, owner, type, pass) => { if(!name || !owner || !pass) return alert("Preencha tudo!"); const details = COMPANY_TYPES[type]; await db.collection('companies').add({ name, owner, type, balance: details.initial, tax: details.tax, password: pass, status: 'PENDING', date: Date.now() }); alert("Criado! Aguarde."); };

            // Admin Functions
            const approveTeam = async (teamId, finalBalance) => { await db.collection('teams').doc(teamId).update({ status: 'ACTIVE', balance: parseFloat(finalBalance) }); postNews(`üõ°Ô∏è **NOVO CLUBE!**\nTime aprovado.`, 'infra'); alert("Aprovado!"); };
            const deleteTeam = async (teamId) => { if(!confirm("Excluir?")) return; const batch = db.batch(); batch.delete(db.collection('teams').doc(teamId)); const snap = await db.collection('players').where('teamId', '==', teamId).get(); snap.docs.forEach(doc => batch.delete(doc.ref)); await batch.commit(); postNews("üö´ **CLUBE EXTINTO**", 'infra'); };
            const approveCompany = async (id) => { await db.collection('companies').doc(id).update({ status: 'ACTIVE' }); const c = companies.find(x=>x.id===id); postNews(`üè¢ **NOVA EMPRESA**\n${c.name} iniciou opera√ß√µes.`, 'money'); };
            const deleteCompany = async (id) => { if(!confirm("Fechar?")) return; await db.collection('companies').doc(id).delete(); alert("Fechada!"); };
            const deletePaper = async (id) => { if(!confirm("Excluir?")) return; const batch = db.batch(); batch.delete(db.collection('newspapers').doc(id)); const js = await db.collection('journalists').where('newspaperId', '==', id).get(); js.docs.forEach(d => batch.delete(d.ref)); await batch.commit(); alert("Fechado!"); };
            const deleteJournalist = async (id) => { if(!confirm("Demitir?")) return; await db.collection('journalists').doc(id).delete(); alert("Demitido!"); };
            const updateBalance = async (teamId, newBal) => { await db.collection('teams').doc(teamId).update({ balance: parseFloat(newBal) }); alert("Atualizado!"); };

            // Game Logic
            const requestSponsorship = async (companyId, value) => { if(!confirm("Pedir?")) return; await db.collection('sponRequests').add({ teamId: user.data.id, teamName: user.data.name, companyId, value: parseFloat(value), status: 'PENDING' }); alert("Enviado!"); setModal(null); };
            const respondSponsorship = async (req, accepted) => { if(accepted) { await db.collection('teams').doc(req.teamId).update({ sponsorship: { name: user.data.name, value: req.value, companyId: user.data.id } }); postNews(`ü§ù **PATROC√çNIO**\n${user.data.name} patrocina ${req.teamName}.`, 'money'); } await db.collection('sponRequests').doc(req.id).delete(); alert(accepted ? "Aceito" : "Recusado"); };
            const addProduct = async (name, price, img) => { await db.collection('products').add({ companyId: user.data.id, companyName: user.data.name, name, price: parseFloat(price), image: img, date: Date.now() }); postNews(`üì¢ **NOVIDADE**\n${user.data.name} lan√ßou ${name}!`, 'product'); setModal(null); };

            const savePlayer = async (d) => {
                const targetTeamId = (user.type==='ADMIN' && adminTeam) ? adminTeam.id : (user.type==='USER' ? user.data.id : d.teamId);
                let payload = { name: d.name, position: d.position, overall: parseInt(d.overall)||0, value: parseFloat(d.value)||0, salary: parseFloat(d.salary)||0, clause: parseFloat(d.clause)||0, contract: parseInt(d.contract)||0, mood: d.mood, status: d.status, teamId: targetTeamId, loan: false, rating: d.rating ? parseFloat(d.rating) : 0, stats: { goals: parseInt(d.stats?.goals||0), assists: parseInt(d.stats?.assists||0), tackles: parseInt(d.stats?.tackles||0), saves: parseInt(d.stats?.saves||0), yellows: parseInt(d.stats?.yellows||0), reds: parseInt(d.stats?.reds||0) } };
                if(d.id) {
                    if(user.type==='USER') payload.stats = (players.find(p=>p.id===d.id)||{}).stats || payload.stats;
                    await db.collection('players').doc(d.id).update(payload);
                } else { await db.collection('players').add(payload); postNews(`üÜï **REFOR√áO**\n${(teams.find(t=>t.id===payload.teamId)||{}).name} contrata ${d.name}.`, 'transfer'); }
                setModal(null);
            };
            const updateStats = async (pid, newStats) => { await db.collection('players').doc(pid).update({ stats: newStats }); alert("Atualizado!"); setModal(null); };
            // --- NEGOTIATION LOGIC (FIXED TEXTS) ---
            const sendOffer = async (target, type, value, swapIds, con, meta, old) => {
                const v = parseFloat(value||0);
                const detailText = `üí∞ Valor: ${fmt(v)}\nüìù Contrato: ${con} Temp`;
                
                const myName = user.data.name; 
                const playerOwnerId = target.teamId;
                const playerOwnerName = teams.find(t=>t.id===playerOwnerId)?.name || 'Desconhecido';
                
                let headline = "", sellerId = null;
                
                if (old && old.id) {
                    // COUNTER-OFFER LOGIC
                    sellerId = old.buyerId; // Reply to the previous proposer
                    if (user.data.id === playerOwnerId) {
                        // I AM OWNER (Rejecting low offer, asking more)
                        headline = `üîÑ **CONTRAPROPOSTA**\nO **${myName}** (Dono) n√£o aceitou e pediu novos termos ao **${teams.find(t=>t.id===sellerId)?.name}** por **${target.name}**.`;
                    } else {
                        // I AM BUYER (Owner asked too much, I counter back)
                        headline = `üîÑ **TR√âPLICA**\nO **${myName}** (Comprador) enviou uma nova contraoferta ao **${playerOwnerName}** por **${target.name}**.`;
                    }
                } else {
                    // NEW OFFER
                    sellerId = playerOwnerId;
                    headline = `üö® **PROPOSTA**\nO **${myName}** enviou uma oferta oficial ao **${playerOwnerName}** por **${target.name}**.`;
                }

                if (!sellerId) { alert("Erro: Destinat√°rio n√£o encontrado."); return; }

                const pl = { playerId: target.id, playerName: target.name, buyerId: user.data.id, buyerName: user.data.name, sellerId, type, value: v, swapPlayerIds: swapIds || [], offerContract: parseInt(con) || 1, description: detailText, meta: meta || {}, date: Date.now() };
                const b = db.batch(); if(old && old.id) b.delete(db.collection('offers').doc(old.id)); b.set(db.collection('offers').doc(), pl); await b.commit();
                postNews(`${headline}\n${detailText}`, 'transfer'); setModal(null); alert("Enviada!");
            };

            const rejectOffer = async (o) => {
                if(!confirm("Recusar?")) return;
                const myName = user.data.name;
                const otherTeamName = teams.find(t=>t.id===o.buyerId)?.name || 'Outro Time';
                const playerOwnerId = (players.find(p=>p.id===o.playerId)||{}).teamId;
                
                let text = "";
                if (user.data.id === playerOwnerId) text = `‚ùå **RECUSA**\nO **${myName}** (Dono) recusou a investida do **${otherTeamName}** por **${o.playerName}**.`;
                else text = `‚ùå **CANCELAMENTO**\nO **${myName}** (Comprador) desistiu da negocia√ß√£o com o **${otherTeamName}** por **${o.playerName}**.`;
                
                setOffers(prev => prev.filter(off => off.id !== o.id));
                await db.collection('offers').doc(o.id).delete();
                postNews(text, 'transfer');
            };

            const acceptOffer = async (o) => {
                const buy = teams.find(t=>t.id===o.buyerId); const sel = teams.find(t=>t.id===user.data.id); const p = players.find(x=>x.id===o.playerId);
                let cost = o.value; if(o.type === 'TROCA' && o.meta?.cashDir === 'RECEIVE') cost = -o.value; 
                
                if (o.type === 'COMPRA' && o.meta?.installments > 1) {
                    if (buy.balance < (cost / o.meta.installments)) return alert("Saldo insuficiente (1¬™ parc)!");
                    db.collection('debts').add({ buyerId: buy.id, buyerName: buy.name, sellerId: sel.id, sellerName: sel.name, playerId: p.id, playerName: p.name, totalVal: cost, installmentVal: cost / o.meta.installments, weeksRemaining: parseInt(o.meta.installments), date: Date.now() }); cost = 0; 
                } else { if (buy.balance < cost) return alert("Sem saldo!"); }
                
                const b = db.batch();
                if(cost !== 0) { b.update(db.collection('teams').doc(buy.id), {balance: buy.balance - cost}); b.update(db.collection('teams').doc(sel.id), {balance: sel.balance + cost}); }
                
                let newsText = "";
                if(o.type==='COMPRA') {
                    if(conf.marketOpen) { b.update(db.collection('players').doc(p.id), {teamId: buy.id, status:'NAO_A_VENDA', loan:false, contract: parseInt(o.offerContract)}); newsText = `ü§ù **FECHADO**\n${buy.name} comprou **${p.name}** do ${sel.name}!`; }
                    else { b.update(db.collection('players').doc(p.id), {status:'VENDIDO', futureTransfer: {teamId: buy.id, contract: parseInt(o.offerContract)}}); newsText = `ü§ù **PR√â-CONTRATO**\n${buy.name} garantiu **${p.name}** para a pr√≥xima temporada.`; }
                } 
                else if(o.type==='EMPRESTIMO') { b.update(db.collection('players').doc(p.id), { teamId: buy.id, status:'NAO_A_VENDA', loan:true, loanFrom: sel.id }); newsText = `üîÑ **EMPR√âSTIMO**\n${buy.name} pegou **${p.name}** emprestado.`; }
                else if(o.type==='TROCA') { b.update(db.collection('players').doc(p.id), {teamId: buy.id}); if(o.swapPlayerIds) o.swapPlayerIds.forEach(id=>b.update(db.collection('players').doc(id), {teamId: sel.id})); newsText = `üîÄ **TROCA**\n${buy.name} e ${sel.name} trocaram jogadores!`; }
                
                setOffers(prev => prev.filter(off => off.id !== o.id)); b.delete(db.collection('offers').doc(o.id)); await b.commit();
                postNews(newsText, 'transfer');
            };

            const renewContract = async (p) => {
                const cost = (p.value || 1000000) * 0.10; if(user.data.balance < cost) return alert("Sem saldo!"); if(!confirm("Renovar?")) return;
                const b = db.batch(); b.update(db.collection('teams').doc(user.data.id), {balance: user.data.balance - cost}); b.update(db.collection('players').doc(p.id), {contract: (p.contract||0) + 1}); await b.commit();
                postNews(`üìù **RENOVA√á√ÉO**\n**${p.name}** renovou com **${user.data.name}**.\nüí∞ Custo: ${fmt(cost)}`, 'transfer'); setModal(null);
            };

            const adminAction = async (act, data) => {
                if(act==='MARKET') { db.collection('config').doc('system').update({marketOpen: data}); postNews(data?"üì¢ JANELA ABERTA":"üîí JANELA FECHADA", 'infra'); }
                if(act==='WEEK') { if(!confirm("Virar Semana?")) return; setLoading(true); const b = db.batch(); teams.forEach(t => { const w=players.filter(p=>p.teamId===t.id).reduce((a,p)=>a+(p.salary||0),0); let s=0; if(t.sponsorship && t.sponsorship.companyId){ const c=companies.find(x=>x.id===t.sponsorship.companyId); if(c && c.balance>t.sponsorship.value){s=t.sponsorship.value; b.update(db.collection('companies').doc(c.id), {balance: firebase.firestore.FieldValue.increment(-s)});} } b.update(db.collection('teams').doc(t.id), {balance:(t.balance||0)+s-w}); }); 
                companies.forEach(c => b.update(db.collection('companies').doc(c.id), {balance: firebase.firestore.FieldValue.increment(-c.tax)}));
                const debts = await db.collection('debts').get(); debts.docs.forEach(doc => { const d=doc.data(); if(d.weeksRemaining>0){ b.update(db.collection('teams').doc(d.buyerId),{balance:firebase.firestore.FieldValue.increment(-d.installmentVal)}); b.update(db.collection('teams').doc(d.sellerId),{balance:firebase.firestore.FieldValue.increment(d.installmentVal)}); if(d.weeksRemaining-1===0) b.delete(doc.ref); else b.update(doc.ref,{weeksRemaining:d.weeksRemaining-1}); }});
                await b.commit(); setLoading(false); postNews("üìÖ VIRADA SEMANAL", 'infra'); alert("Ok"); }
                if(act==='SEASON') { if(!confirm("Virar Temp?")) return; const b=db.batch(); players.forEach(p=>{ let u={}; if(p.futureTransfer){u=p.futureTransfer; u.futureTransfer=firebase.firestore.FieldValue.delete();} else { let nc=(p.contract||0)-1; if(nc<0)nc=0; u.contract=nc; } b.update(db.collection('players').doc(p.id), u); }); await b.commit(); postNews("üåû NOVA TEMPORADA", 'season'); alert("Ok"); }
            };

            // --- RENDER ---
            if(loading) return <div style={{display:'grid', placeItems:'center', height:'100vh'}}>Carregando...</div>;
            if(!user) return <LoginScreen teams={teams} papers={papers} journalists={journalists} companies={companies} onLogin={login} onCreateTeam={createTeam} onCreatePaper={createNewspaper} onCreateJourno={createJournalist} onCreateComp={createCompany} onAdmin={loginAdmin} onVisitor={()=>{setUser({type:'VISITOR'}); setScreen('RANKING');}} />;

            return (
                <div>
                    <div className="header"><div style={{display:'flex', alignItems:'center', gap:10}}>{user.type==='USER' && user.data.logo && <img src={user.data.logo} style={{width:40, height:40, borderRadius:'50%', border:'2px solid var(--primary)', objectFit:'cover'}} />}<div><div style={{fontWeight:'900', fontSize:16}}>{user.type==='USER'||user.type==='COMPANY'?user.data.name:user.data?.name||user.type}</div><div className="dev-credits">Desenvolvido por: Nathan Reis | v1.42.3 (HF)</div></div></div><div style={{display:'flex', gap:15, alignItems:'center'}}>{user.type==='USER' && <div onClick={()=>setScreen('OFFERS')}><i className="fas fa-bell" style={{color: offers.length ? 'var(--warning)' : '#555'}}></i>{offers.length > 0 && <span style={{position:'absolute', top:-5, right:-5, background:'red', borderRadius:'50%', width:8, height:8}} className="pulse"></span>}</div>}{(user.type==='USER'||user.type==='COMPANY') && <div style={{color:'var(--primary)', fontWeight:'bold'}}>{fmt(user.data.balance)}</div>}{user.type==='USER' && <i className="fas fa-cog" onClick={()=>setModal({type:'SETTINGS', data:user.data})}></i>}<i className="fas fa-sign-out-alt" onClick={()=>window.location.reload()}></i></div></div>
                    <div className="container">
                        {screen === 'HOME' && user.type === 'ADMIN' && <AdminPanel teams={teams} papers={papers} journalists={journalists} companies={companies} reqs={reqs} config={conf} onAct={adminAction} onPost={(t,b,tp)=>postNews(`üì¢ **${t}**\n${b}`, tp)} onApprove={async(r)=>{/*Fin*/}} onReject={(id)=>db.collection('financeRequests').doc(id).delete()} onEditT={(t)=>{setAdminTeam(t); setScreen('ADMIN_TEAM');}} onApproveTeam={approveTeam} onUpdateBal={updateBalance} onDeleteTeam={deleteTeam} onApprovePaper={async(id)=>{db.collection('newspapers').doc(id).update({status:'ACTIVE'});}} onDeletePaper={deletePaper} onDeleteJourno={deleteJournalist} onRejectPaper={(id)=>db.collection('newspapers').doc(id).delete()} onApproveComp={approveCompany} onDeleteComp={deleteCompany} onConfig={(t)=>setModal({type:'SETTINGS', data:t})} />}
                        {screen === 'HOME' && user.type === 'USER' && <TeamDashboard team={user.data} players={players.filter(p=>p.teamId===user.data.id)} isVisitor={false} onEdit={(p)=>setModal({type:'PLAYER', data:p})} onAdd={()=>setModal({type:'PLAYER'})} onFindSponsor={()=>setModal({type:'FIND_SPONSOR'})} />}
                        {screen === 'HOME' && user.type === 'VISITOR' && <VisitorDashboard players={players} teams={teams} />}
                        {screen === 'COMPANY_DASH' && <div><h3>Painel da Empresa</h3><div className="card"><div style={{color:user.data.balance<0?'red':'white'}}>Caixa: {fmt(user.data.balance)}</div><div style={{fontSize:11, color:'#888'}}>Imposto: {fmt(user.data.tax)}</div><button className="btn btn-purple" style={{marginTop:10}} onClick={()=>setModal({type:'ADD_PRODUCT'})}>CADASTRAR PRODUTO</button></div><h4>Solicita√ß√µes</h4>{sponReqs.filter(r=>r.companyId===user.data.id).map(r=><div key={r.id} className="card"><b>{r.teamName}</b> pede {fmt(r.value)}<div style={{display:'flex', gap:5, marginTop:5}}><button className="btn btn-green" onClick={()=>respondSponsorship(r, true)}>V</button><button className="btn btn-red" onClick={()=>respondSponsorship(r, false)}>X</button></div></div>)}</div>}
                        {screen === 'PRESS_DASH' && (user.type==='PRESS'||user.type==='PRESS_WORKER') && (<div><h3>Painel de Imprensa ({user.data.name})</h3><div className="card"><button className="btn btn-blue" onClick={()=>setModal({type:'POST_NEWS'})}>ESCREVER NOT√çCIA</button><button className="btn btn-purple" onClick={()=>setModal({type:'STATS_SEARCH'})}>S√öMULA</button></div>{user.type==='PRESS' && journalists.filter(j=>j.newspaperId===user.data.id && j.status==='PENDING').map(j=><div key={j.id} className="card">{j.name}<button className="btn btn-green" onClick={()=>db.collection('journalists').doc(j.id).update({status:'ACTIVE'})}>APROVAR</button></div>)}</div>)}
                        {screen === 'ADMIN_TEAM' && adminTeam && <div><button className="btn" style={{background:'#333', marginBottom:10}} onClick={()=>{setAdminTeam(null); setScreen('HOME');}}>‚¨Ö VOLTAR</button><h3 style={{color:'var(--purple)'}}>Editando: {adminTeam.name}</h3><TeamDashboard team={adminTeam} players={players.filter(p=>p.teamId===adminTeam.id)} isVisitor={false} onEdit={(p)=>setModal({type:'PLAYER', data:p})} onAdd={()=>setModal({type:'PLAYER'})} /></div>}
                        {screen === 'MARKET' && <Market me={user.data?.id} teams={teams} players={players} open={conf.marketOpen} isVis={user.type==='VISITOR'} onNeg={(p)=>setModal({type:'OFFER', data:p})} onPayClause={async(p)=>{/*Clause*/}} onPre={async(p)=>{/*Pre*/}} />}
                        {screen === 'RANKING' && <Ranking teams={teams} players={players} />}
                        {screen === 'SHOPPING' && <div><h3>Shopping</h3><div className="product-grid">{products.map(p=><div key={p.id} className="product-card"><img src={p.image} className="product-img" /><div className="product-info"><b>{p.name}</b><br/><span style={{color:'var(--primary)'}}>{fmt(p.price)}</span><br/><small style={{color:'#666'}}>{p.companyName}</small></div></div>)}</div></div>}
                        {screen === 'NEWS' && <div><h3>Not√≠cias</h3>{news.map(n=><div key={n.id} className={`news-card news-${n.type}`}>{n.text}<br/><small style={{color:'#666'}}>{new Date(n.date).toLocaleString()}</small></div>)}</div>}
                        {screen === 'OFFERS' && <OffersScreen offers={offers} onAccept={acceptOffer} onReject={rejectOffer} onCounter={(o)=>setModal({type:'OFFER', data:{...players.find(p=>p.id===o.playerId), oldOffer:o}})} />}
                    </div>

                    <div className="bottom-nav"><div className={`nav-item ${screen==='HOME'?'active':''}`} onClick={()=>setScreen(user.type==='COMPANY'?'COMPANY_DASH':(user.type.includes('PRESS')?'PRESS_DASH':'HOME'))}><i className="fas fa-home"></i>{user.type==='ADMIN'?'ADM':'IN√çCIO'}</div><div className={`nav-item ${screen==='MARKET'?'active':''}`} onClick={()=>setScreen('MARKET')}><i className="fas fa-globe"></i>MERCADO</div><div className={`nav-item ${screen==='SHOPPING'?'active':''}`} onClick={()=>setScreen('SHOPPING')}><i className="fas fa-shopping-bag"></i>LOJA</div><div className={`nav-item ${screen==='RANKING'?'active':''}`} onClick={()=>setScreen('RANKING')}><i className="fas fa-trophy"></i>RANK</div><div className={`nav-item ${screen==='NEWS'?'active':''}`} onClick={()=>{setScreen('NEWS'); setNewNews(false); localStorage.setItem('lastRead', Date.now());}}><i className="fas fa-newspaper"></i>{newNews && <span style={{color:'red'}}>‚óè</span>} NEWS</div></div>

                    {modal && <div className="modal-overlay" onClick={(e)=>e.target===e.currentTarget && setModal(null)}>
                        <div className="modal-content">
                            {modal.type==='PLAYER' && <PlayerForm initial={modal.data} onSave={savePlayer} onDelete={async(id)=>{db.collection('players').doc(id).delete(); setModal(null);}} isAdmin={user.type==='ADMIN'} teams={teams} onRenew={renewContract} isOwner={user.type==='USER' && modal.data?.teamId===user.data?.id} />}
                            {modal.type==='OFFER' && <OfferForm target={modal.data} myPlayers={players.filter(p=>p.teamId===user.data.id)} onSend={sendOffer} />}
                            {modal.type==='SETTINGS' && <SettingsForm team={modal.data || user.data} isAdmin={user.type==='ADMIN'} onUp={(d)=>{const tid=(modal.data?.id)||user.data.id; db.collection('teams').doc(tid).update(d); setModal(null);}} onUpgrade={()=>{/*Up*/}} onReq={(t,a,d)=>{db.collection('financeRequests').add({teamId:user.data.id, teamName:user.data.name, type:t, amount:parseFloat(a), details:d, status:'PENDING'}); setModal(null); alert("Enviado!");}} onWithdraw={withdrawMoney} />}
                            {modal.type==='POST_NEWS' && <div><h3>Nova Not√≠cia</h3><input className="input-field" placeholder="Manchete / Texto" id="news-body" /><button className="btn btn-blue" onClick={()=>{postNews(`üì∞ **${user.data.name}:**\n${document.getElementById('news-body').value}`, 'press'); setModal(null);}}>PUBLICAR</button></div>}
                            {modal.type==='STATS_SEARCH' && <StatsEditor players={players} teams={teams} onSave={updateStats} />}
                            {modal.type==='FIND_SPONSOR' && <div><h3>Buscar Patroc√≠nio</h3>{(companies||[]).filter(c=>c.status==='ACTIVE').map(c=><div key={c.id} className="card"><b>{c.name}</b><br/><small>{(COMPANY_TYPES[c.type]||{label:c.type}).label}</small><button className="btn btn-green" onClick={()=>{const v=prompt("Valor Semanal:"); if(v) requestSponsorship(c.id, v)}}>SOLICITAR</button></div>)}</div>}
                            {modal.type==='ADD_PRODUCT' && <div><h3>Novo Produto</h3><input className="input-field" placeholder="Nome do Produto" id="p_name"/><input className="input-field" type="number" placeholder="Pre√ßo" id="p_price"/><input className="input-field" placeholder="URL da Imagem" id="p_img"/><button className="btn btn-green" onClick={()=>addProduct(document.getElementById('p_name').value, document.getElementById('p_price').value, document.getElementById('p_img').value)}>CADASTRAR</button></div>}
                        </div>
                    </div>}
                </div>
            );
        }

        const LoginScreen = ({ teams, papers, journalists, companies, onLogin, onCreateTeam, onCreatePaper, onCreateJourno, onCreateComp, onAdmin, onVisitor }) => {
            const [tab, setTab] = useState('LOGIN'); const [subTab, setSubTab] = useState('TEAM'); const [f, setF] = useState({n:'', b:'10000000', s:'A', p:'', type:'LARGE', owner:''}); const [sel, setSel] = useState(null); const [selPaper, setSelPaper] = useState(null); const [lp, setLp] = useState('');
            const handleUpload = (e) => { const file=e.target.files[0]; const reader=new FileReader(); reader.onloadend=()=>setF({...f, l:reader.result}); if(file) reader.readAsDataURL(file); };
            return ( <div style={{minHeight:'100vh', padding:20, textAlign:'center'}}><h1 style={{color:'var(--primary)'}}>Mato Real <small style={{color:'#fff', fontSize:12}}>Manager v1.42.3</small></h1><div className="login-tabs"><div className={`tab ${tab==='LOGIN'?'active':''}`} onClick={()=>setTab('LOGIN')}>ENTRAR</div><div className={`tab ${tab==='CREATE'?'active':''}`} onClick={()=>setTab('CREATE')}>CRIAR</div><div className={`tab ${tab==='PRESS'?'active':''}`} onClick={()=>setTab('PRESS')}>IMPRENSA</div><div className={`tab ${tab==='EMP'?'active':''}`} onClick={()=>setTab('EMP')}>EMPRESA</div></div>
                {tab==='LOGIN' && <div>{(teams||[]).filter(t=>t.status!=='PENDING').map(t=><div key={t.id} className="card" onClick={()=>setSel({...t, type:'TEAM'})} style={{display:'flex', alignItems:'center', gap:10, cursor:'pointer'}}>{t.logo ? <img src={t.logo} className="team-logo" style={{width:40, height:40, objectFit:'cover'}}/> : <div className="team-logo"></div>}<div><b>{t.name}</b><br/><small style={{color:'#666'}}>S√©rie {t.serie}</small></div></div>)}<div style={{marginTop:20}}><button className="btn btn-blue" onClick={onVisitor}>ENTRAR COMO VISITANTE</button><button className="btn btn-ghost" onClick={()=> {if(prompt("Senha:")==='2503') onAdmin()}}>ADMIN</button></div></div>}
                {tab==='CREATE' && <div><input type="file" className="file-input" onChange={handleUpload} /><input className="input-field" placeholder="Nome" value={f.n} onChange={e=>setF({...f, n:e.target.value})} /><input className="input-field" type="number" placeholder="Saldo" value={f.b} onChange={e=>setF({...f, b:e.target.value})} /><select className="input-field" value={f.s} onChange={e=>setF({...f, s:e.target.value})}>{SERIES.map(s=><option key={s} value={s}>S√©rie {s}</option>)}</select><input className="input-field" type="number" placeholder="Senha" value={f.p} onChange={e=>setF({...f, p:e.target.value})} /><button className="btn btn-green" onClick={()=>onCreateTeam(f.n, f.b, f.s, f.p, f.l)}>CRIAR</button></div>}
                {tab==='PRESS' && <div><div style={{display:'flex', gap:10, marginBottom:10}}><button className="btn btn-ghost" onClick={()=>setSubTab('LOGIN_P')}>LOGIN</button><button className="btn btn-ghost" onClick={()=>setSubTab('NEW_PAPER')}>CRIAR JORNAL</button><button className="btn btn-ghost" onClick={()=>setSubTab('NEW_JOURNO')}>SOU JORNALISTA</button></div>{subTab==='LOGIN_P' && !selPaper && <div><h4>Selecione o Jornal</h4>{(papers||[]).filter(p=>p.status==='ACTIVE').map(p=><div key={p.id} className="card" onClick={()=>setSelPaper(p)}>üì∞ {p.name}</div>)}</div>}{subTab==='LOGIN_P' && selPaper && <div><button className="btn" style={{marginBottom:10}} onClick={()=>setSelPaper(null)}>‚¨Ö VOLTAR</button><h4>{selPaper.name} - Jornalistas</h4><div className="card" onClick={()=>setSel({...selPaper, type:'PAPER'})} style={{border:'1px solid var(--primary)'}}>üëë {selPaper.ownerName} (Dono)</div>{(journalists||[]).filter(j=>j.newspaperId===selPaper.id && j.status==='ACTIVE').map(j=><div key={j.id} className="card" onClick={()=>setSel({...j, type:'JOURNALIST'})}>‚úíÔ∏è {j.name}</div>)}</div>}{subTab==='NEW_PAPER' && <div><input className="input-field" placeholder="Nome do Jornal" id="pn" /><input className="input-field" placeholder="Seu Nome (Dono)" id="po" /><input className="input-field" type="number" placeholder="Senha" id="pp" /><button className="btn btn-green" onClick={()=>onCreatePaper(document.getElementById('pn').value, document.getElementById('pp').value, document.getElementById('po').value)}>SOLICITAR CRIA√á√ÉO</button></div>}{subTab==='NEW_JOURNO' && <div><input className="input-field" placeholder="Seu Nome" id="jn" /><select className="input-field" id="jp_id"><option value="">Selecione o Jornal</option>{(papers||[]).filter(p=>p.status==='ACTIVE').map(p=><option key={p.id} value={p.id}>{p.name}</option>)}</select><input className="input-field" type="number" placeholder="Senha" id="jp" /><button className="btn btn-green" onClick={()=>onCreateJourno(document.getElementById('jn').value, document.getElementById('jp').value, document.getElementById('jp_id').value)}>SOLICITAR EMPREGO</button></div>}</div>}
                {tab==='EMP' && <div><div style={{display:'flex', gap:10, marginBottom:10}}><button className="btn btn-ghost" onClick={()=>setSubTab('LOGIN_C')}>LOGIN</button><button className="btn btn-ghost" onClick={()=>setSubTab('NEW_C')}>CRIAR</button></div>{subTab==='LOGIN_C' && <div>{(companies||[]).filter(c=>c.status==='ACTIVE').map(c=><div key={c.id} className="card" onClick={()=>setSel({...c, type:'COMPANY'})}>üè¢ {c.name}</div>)}</div>}{subTab==='NEW_C' && <div><input className="input-field" placeholder="Nome" value={f.n} onChange={e=>setF({...f, n:e.target.value})} /><input className="input-field" placeholder="Dono" value={f.owner} onChange={e=>setF({...f, owner:e.target.value})} /><select className="input-field" value={f.type} onChange={e=>setF({...f, type:e.target.value})}>{Object.keys(COMPANY_TYPES).map(k=><option key={k} value={k}>{COMPANY_TYPES[k].label}</option>)}</select><input className="input-field" type="number" placeholder="Senha" value={f.p} onChange={e=>setF({...f, p:e.target.value})} /><button className="btn btn-green" onClick={()=>onCreateComp(f.n, f.owner, f.type, f.p)}>SOLICITAR</button></div>}</div>}
                {sel && <div className="modal-overlay"><div className="modal-content"><h3>{sel.name}</h3><input className="input-field" type="password" placeholder="Senha" value={lp} onChange={e=>setLp(e.target.value)} /><button className="btn btn-green" onClick={()=>onLogin(sel.id, lp, sel.type)}>ENTRAR</button><button className="btn" onClick={()=>setSel(null)}>CANCELAR</button></div></div>}</div>
            );
        };

        const AdminPanel = ({ teams, papers, journalists, companies, reqs, config, onAct, onPost, onApprove, onReject, onEditT, onApproveTeam, onUpdateBal, onDeleteTeam, onConfig, onApprovePaper, onDeletePaper, onDeleteJourno, onRejectPaper, onApproveComp, onDeleteComp }) => ( <div><h3>Painel Master</h3><div className="card"><button className={`btn ${config.marketOpen?'btn-red':'btn-green'}`} onClick={()=>onAct('MARKET', !config.marketOpen)}>{config.marketOpen?'FECHAR MERCADO':'ABRIR MERCADO'}</button><button className="btn btn-purple" onClick={()=>onAct('WEEK')}>VIRAR SEMANA</button><button className="btn btn-red" onClick={()=>onAct('SEASON')}>VIRAR TEMPORADA</button><button className="btn btn-gold" onClick={()=>{ const t=prompt("T√≠tulo"); const b=prompt("Texto"); if(t)onPost(t,b,'admin'); }}>COMUNICADO</button></div>{(teams||[]).some(t=>t.status==='PENDING') && <h4>Pendentes (Times)</h4>}{(teams||[]).filter(t=>t.status==='PENDING').map(t=><div key={t.id} className="card" style={{borderLeft:'4px solid var(--warning)'}}><b>{t.name}</b><div style={{display:'flex', gap:5}}><input className="input-field" style={{marginBottom:0, width:100}} defaultValue={t.balance} id={`bal-${t.id}`} /><button className="btn btn-green" onClick={()=>onApproveTeam(t.id, document.getElementById(`bal-${t.id}`).value)}>V</button><button className="btn btn-red" onClick={()=>onDeleteTeam(t.id)}>X</button></div></div>)}{(papers||[]).some(p=>p.status==='PENDING') && <h4>Pendentes (Jornais)</h4>}{(papers||[]).filter(p=>p.status==='PENDING').map(p=><div key={p.id} className="card"><b>üì∞ {p.name}</b><br/><small>Dono: {p.ownerName}</small><button className="btn btn-green" onClick={()=>onApprovePaper(p.id)}>APROVAR</button><button className="btn btn-red" style={{marginLeft:5}} onClick={()=>onRejectPaper(p.id)}>X</button></div>)}{(companies||[]).some(c=>c.status==='PENDING') && <h4>Pendentes (Empresas)</h4>}{(companies||[]).filter(c=>c.status==='PENDING').map(c=><div key={c.id} className="card"><b>üè¢ {c.name}</b><br/><small>Tipo: {(COMPANY_TYPES[c.type] || {}).label || 'N/A'}</small><button className="btn btn-green" onClick={()=>{if(onApproveComp)onApproveComp(c.id)}}>APROVAR</button></div>)}<h4>Gest√£o de Imprensa</h4>{(papers||[]).filter(p=>p.status==='ACTIVE').map(p=><div key={p.id} className="card" style={{display:'flex', justifyContent:'space-between'}}><span>üì∞ {p.name}</span><button className="btn btn-red" style={{width:'auto'}} onClick={()=>onDeletePaper(p.id)}>X</button></div>)}{(journalists||[]).map(j=><div key={j.id} className="card" style={{display:'flex', justifyContent:'space-between'}}><span>‚úíÔ∏è {j.name}</span><button className="btn btn-red" style={{width:'auto'}} onClick={()=>onDeleteJourno(j.id)}>X</button></div>)}<h4>Gest√£o de Empresas</h4>{(companies||[]).filter(c=>c.status==='ACTIVE').map(c=><div key={c.id} className="card" style={{display:'flex', justifyContent:'space-between'}}><span>üè¢ {c.name}</span><button className="btn btn-red" style={{width:'auto'}} onClick={()=>{if(onDeleteComp)onDeleteComp(c.id)}}>X</button></div>)}<h4>Solicita√ß√µes</h4>{(reqs||[]).filter(r=>r.status==='PENDING').map(r=><div key={r.id} className="card"><b>{r.teamName}</b>: {fmt(r.amount)} ({r.type})<br/>{r.details}<br/><button className="btn-green" style={{width:'auto', marginRight:5}} onClick={()=>onApprove(r)}>V</button><button className="btn-red" style={{width:'auto'}} onClick={()=>onReject(r.id)}>X</button></div>)}<h4>Clubes</h4>{(teams||[]).filter(t=>t.status!=='PENDING').map(t=><div key={t.id} className="card" style={{display:'flex', justifyContent:'space-between'}}><span>{t.name}</span><div><button className="btn btn-ghost" style={{width:'auto', marginRight:5}} onClick={()=>onConfig(t)}><i className="fas fa-cog"></i></button><button className="btn btn-green" style={{width:'auto', marginRight:5}} onClick={()=>{const n=prompt("Novo Saldo:", t.balance); if(n)onUpdateBal(t.id, n)}}>$</button><button className="btn btn-purple" style={{width:'auto'}} onClick={()=>onEditT(t)}>ELENCO</button><button className="btn btn-red" style={{width:'auto', marginLeft:5}} onClick={()=>onDeleteTeam(t.id)}><i className="fas fa-trash"></i></button></div></div>)}</div> );
        
        const VisitorDashboard = ({ players, teams }) => { const topScorer = players.sort((a,b)=>(b.stats?.goals||0)-(a.stats?.goals||0))[0]; const topAssist = players.sort((a,b)=>(b.stats?.assists||0)-(a.stats?.assists||0))[0]; return ( <div className="highlight-card"><h2 style={{margin:0, color:'var(--primary)'}}>Jornal do Dia</h2><small>Resumo da Temporada</small><div style={{marginTop:15, textAlign:'left'}}><div style={{marginBottom:10}}><span style={{color:'#aaa', fontSize:10, textTransform:'uppercase'}}>Artilheiro</span><div style={{fontWeight:'bold', fontSize:16}}>‚öΩ {topScorer?.name || 'Ningu√©m'} <span style={{color:'var(--primary)'}}>{topScorer?.stats?.goals||0} Gols</span></div></div><div><span style={{color:'#aaa', fontSize:10, textTransform:'uppercase'}}>Rei das Assist√™ncias</span><div style={{fontWeight:'bold', fontSize:16}}>üëü {topAssist?.name || 'Ningu√©m'} <span style={{color:'var(--secondary)'}}>{topAssist?.stats?.assists||0} Assis</span></div></div></div></div> ); };
        const TeamDashboard = ({ team, players, isVisitor, onEdit, onAdd, onFindSponsor }) => ( <div><div style={{display:'flex', justifyContent:'space-between', marginBottom:10}}><h3>Elenco ({players.length})</h3><div>{!isVisitor && <button className="btn btn-gold" style={{width:'auto', marginRight:5}} onClick={onFindSponsor}>PATROC√çNIO</button>}{!isVisitor && <button className="btn btn-green" style={{width:'auto'}} onClick={onAdd}>+ JOGADOR</button>}</div></div>{team.sponsorship && <div className="card" style={{border:'1px solid gold', background:'#332b00'}}>üèÜ Patroc√≠nio: <b>{team.sponsorship.name}</b> ({fmt(team.sponsorship.value)}/sem)</div>}{players.sort((a,b)=>b.overall-a.overall).map(p => ( <div key={p.id} className="card" onClick={()=>!isVisitor && onEdit(p)} style={{cursor: isVisitor?'default':'pointer'}}><div style={{display:'flex', justifyContent:'space-between'}}><div><span className="badge-pos" style={{background:getPosColor(p.position)}}>{p.position}</span><b>{p.name}</b> {p.rating > 0 && <span className="rating-badge">‚òÖ {p.rating}</span>}</div><span className="player-ov">{p.overall}</span></div><div style={{display:'grid', gridTemplateColumns:'1fr 1fr', fontSize:11, color:'#aaa', marginTop:5}}><div>Sal: {fmt(p.salary)}</div><div>Val: {fmt(p.value)}</div><div>Con: {p.contract}</div><div>Mul: {fmt(p.clause)}</div></div><div className="stats-grid"><div className="stat-item"><span className="stat-lbl">‚öΩ</span><span className="stat-val">{p.stats?.goals||0}</span></div><div className="stat-item"><span className="stat-lbl">üëü</span><span className="stat-val">{p.stats?.assists||0}</span></div><div className="stat-item"><span className="stat-lbl">üõ°Ô∏è</span><span className="stat-val">{p.stats?.tackles||0}</span></div><div className="stat-item"><span className="stat-lbl">üß§</span><span className="stat-val">{p.stats?.saves||0}</span></div><div className="stat-item"><span className="stat-lbl">ùü®</span><span className="stat-val">{p.stats?.yellows||0}</span></div><div className="stat-item"><span className="stat-lbl">üü•</span><span className="stat-val">{p.stats?.reds||0}</span></div></div></div> ))}</div> );
        const StatsEditor = ({ players, teams, onSave }) => { const [search, setSearch] = useState(''); const [selP, setSelP] = useState(null); const [s, setS] = useState({}); const filtered = players.filter(p => p.name.toLowerCase().includes(search.toLowerCase())); if (selP) return ( <div><h3>Editando: {selP.name}</h3><div style={{display:'grid', gridTemplateColumns:'1fr 1fr', gap:10}}><div><label>Gols</label><input className="input-field" type="number" value={s.goals} onChange={e=>setS({...s, goals:parseInt(e.target.value)})} /></div><div><label>Assist√™ncias</label><input className="input-field" type="number" value={s.assists} onChange={e=>setS({...s, assists:parseInt(e.target.value)})} /></div><div><label>Desarmes</label><input className="input-field" type="number" value={s.tackles} onChange={e=>setS({...s, tackles:parseInt(e.target.value)})} /></div><div><label>Defesas</label><input className="input-field" type="number" value={s.saves} onChange={e=>setS({...s, saves:parseInt(e.target.value)})} /></div><div><label>Amarelos</label><input className="input-field" type="number" value={s.yellows} onChange={e=>setS({...s, yellows:parseInt(e.target.value)})} /></div><div><label>Vermelhos</label><input className="input-field" type="number" value={s.reds} onChange={e=>setS({...s, reds:parseInt(e.target.value)})} /></div></div><button className="btn btn-green" onClick={()=>onSave(selP.id, s)}>SALVAR ESTAT√çSTICAS</button><button className="btn" onClick={()=>setSelP(null)}>VOLTAR</button></div> ); return (<div><input className="input-field" placeholder="Buscar jogador..." value={search} onChange={e=>setSearch(e.target.value)} /><div style={{maxHeight:300, overflowY:'auto'}}>{search.length > 0 && filtered.map(p => (<div key={p.id} className="card" onClick={()=>{setSelP(p); setS(p.stats || {goals:0,assists:0,tackles:0,saves:0,yellows:0,reds:0})}}><b>{p.name}</b> <small>({teams.find(t=>t.id===p.teamId)?.name})</small></div>))}</div></div>); };
        const PlayerForm = ({ initial, onSave, onDelete, isAdmin, teams, onRenew, isOwner }) => { const [f, setF] = useState(initial || {name:'', position:'ATA', overall:'', value:'', salary:'', clause:'', contract:'', mood:'üòê', status:'NAO_A_VENDA', rating: '', stats: {goals:0, assists:0, tackles:0, saves:0, yellows:0, reds:0}}); return ( <div><label>Nome</label><input className="input-field" value={f.name} onChange={e=>setF({...f, name:e.target.value})} /><div style={{display:'flex', gap:5}}><div style={{flex:1}}><label>Posi√ß√£o</label><select className="input-field" value={f.position} onChange={e=>setF({...f, position:e.target.value})}>{POS.map(p=><option key={p} value={p}>{p}</option>)}</select></div><div style={{flex:1}}><label>Overall</label><input className="input-field" type="number" value={f.overall} onChange={e=>setF({...f, overall:e.target.value})} disabled={!isAdmin && initial} /></div></div><div style={{display:'flex', gap:5}}><div style={{flex:1}}><label>Valor</label><input className="input-field" type="number" value={f.value} onChange={e=>setF({...f, value:e.target.value})} /></div><div style={{flex:1}}><label>Sal√°rio</label><input className="input-field" type="number" value={f.salary} onChange={e=>setF({...f, salary:e.target.value})} /></div></div><div style={{display:'flex', gap:5}}><div style={{flex:1}}><label>Multa</label><input className="input-field" type="number" value={f.clause} onChange={e=>setF({...f, clause:e.target.value})} /></div><div style={{flex:1}}><label>Contrato</label><input className="input-field" type="number" value={f.contract} onChange={e=>setF({...f, contract:e.target.value})} /></div></div><label>Status</label><select className="input-field" value={f.status} onChange={e=>setF({...f, status:e.target.value})}><option value="NAO_A_VENDA">N√£o Listado</option><option value="VENDA">√Ä Venda</option><option value="EMPRESTIMO">Empr√©stimo</option><option value="INTRANSFERIVEL">Bloqueado</option></select><label>Humor</label><select className="input-field" value={f.mood} onChange={e=>setF({...f, mood:e.target.value})}><option>ü§©</option><option>üòê</option><option>üò°</option></select>{isAdmin && <div style={{border:'1px solid var(--purple)', padding:5, borderRadius:5, margin:'5px 0'}}><label style={{color:'var(--purple)'}}>Nota (0.0 - 10.0)</label><input className="input-field" type="number" step="0.1" min="0" max="10" value={f.rating} onChange={e=>setF({...f, rating:e.target.value})} /></div>}{isAdmin && <div style={{border:'1px solid var(--primary)', padding:8, borderRadius:8, marginTop:10}}><label style={{color:'var(--primary)', display:'block', marginBottom:5}}>Estat√≠sticas (Admin)</label><div style={{display:'grid', gridTemplateColumns:'1fr 1fr 1fr', gap:5}}><div><span style={{fontSize:10, color:'#aaa'}}>‚öΩ Gols</span><input className="input-field" type="number" value={f.stats?.goals||0} onChange={e=>setF({...f, stats:{...f.stats, goals:e.target.value}})} /></div><div><span style={{fontSize:10, color:'#aaa'}}>üëü Assis</span><input className="input-field" type="number" value={f.stats?.assists||0} onChange={e=>setF({...f, stats:{...f.stats, assists:e.target.value}})} /></div><div><span style={{fontSize:10, color:'#aaa'}}>üõ°Ô∏è Desar</span><input className="input-field" type="number" value={f.stats?.tackles||0} onChange={e=>setF({...f, stats:{...f.stats, tackles:e.target.value}})} /></div><div><span style={{fontSize:10, color:'#aaa'}}>üß§ Defes</span><input className="input-field" type="number" value={f.stats?.saves||0} onChange={e=>setF({...f, stats:{...f.stats, saves:e.target.value}})} /></div><div><span style={{fontSize:10, color:'#aaa'}}>üü® Amar</span><input className="input-field" type="number" value={f.stats?.yellows||0} onChange={e=>setF({...f, stats:{...f.stats, yellows:e.target.value}})} /></div><div><span style={{fontSize:10, color:'#aaa'}}>üü• Verm</span><input className="input-field" type="number" value={f.stats?.reds||0} onChange={e=>setF({...f, stats:{...f.stats, reds:e.target.value}})} /></div></div></div>}{isAdmin && <div style={{border:'1px solid gold', padding:5, marginTop:5}}><label style={{color:'gold'}}>Mover Time (Adm)</label><select className="input-field" onChange={e=>setF({...f, forcedTeamId:e.target.value})}><option value="">-- Manter --</option>{teams.map(t=><option key={t.id} value={t.id}>{t.name}</option>)}</select></div>}<div style={{display:'flex', gap:10, marginTop:15}}><button className="btn btn-green" onClick={()=>onSave(f)}>SALVAR</button>{isOwner && <button className="btn btn-blue" onClick={()=>onRenew(initial)}>RENOVAR</button>}{initial && <button className="btn btn-red" onClick={()=>onDelete(initial.id)}>X</button>}</div></div> ); };
        const Market = ({ me, teams, players, open, isVis, onNeg, onPayClause, onPre }) => { const [view, setView] = useState('MENU'); const [serie, setSerie] = useState('A'); const [selT, setSelT] = useState(null); const [filt, setFilt] = useState('VENDA'); if(view==='MENU') return <div><h3>Mercado {open?'üü¢':'üî¥'}</h3><div style={{display:'flex', gap:10}}><div className="card" style={{flex:1, textAlign:'center', cursor:'pointer', border:'1px solid var(--primary)'}} onClick={()=>{setFilt('VENDA'); setView('GLOBAL');}}>üõí VENDA</div><div className="card" style={{flex:1, textAlign:'center', cursor:'pointer', border:'1px solid var(--secondary)'}} onClick={()=>{setFilt('EMPRESTIMO'); setView('GLOBAL');}}>üîÑ EMP</div></div><h4>S√©ries</h4><div style={{display:'grid', gridTemplateColumns:'1fr 1fr', gap:10}}>{SERIES.map(s=><div key={s} className="card" style={{textAlign:'center', cursor:'pointer'}} onClick={()=>{setSerie(s); setView('LIST');}}><b>S√©rie {s}</b></div>)}</div></div>; let list = []; if(view==='GLOBAL') list = players.filter(p=>p.status===filt && p.teamId!==me).sort((a,b)=>b.overall-a.overall); else if(view==='TEAM') list = players.filter(p=>p.teamId===selT.id).sort((a,b)=>b.overall-a.overall); if(view==='LIST') return <div><button className="btn" onClick={()=>setView('MENU')}>Voltar</button><h3>Clubes S√©rie {serie}</h3>{teams.filter(t=>t.serie===serie && t.status!=='PENDING').map(t=><div key={t.id} className="card" onClick={()=>{setSelT(t); setView('TEAM');}} style={{display:'flex', alignItems:'center', gap:10, cursor:'pointer'}}>{t.logo?<img src={t.logo} style={{width:30, height:30, borderRadius:'50%', objectFit:'cover'}}/>:<div style={{width:30}}></div>}<b>{t.name}</b></div>)}</div>; return <div><button className="btn" onClick={()=>setView('MENU')}>Voltar</button><h3>{view==='GLOBAL'?filt:selT.name}</h3>{list.map(p => ( <div key={p.id} className="card"><div style={{display:'flex', justifyContent:'space-between'}}><div><span className="badge-pos" style={{background:getPosColor(p.position)}}>{p.position}</span>{p.name} {p.rating>0 && <span className="rating-badge">‚òÖ {p.rating}</span>}</div><span className="player-ov">{p.overall}</span></div><div style={{fontSize:11, color:'#aaa', marginTop:5}}>{view==='GLOBAL' && <div>Time: {teams.find(t=>t.id===p.teamId)?.name}</div>}<div>Val: {fmt(p.value)} | Con: {p.contract}</div></div><div className="stats-grid"><div className="stat-item"><span className="stat-lbl">‚öΩ</span><span className="stat-val">{p.stats?.goals||0}</span></div><div className="stat-item"><span className="stat-lbl">üëü</span><span className="stat-val">{p.stats?.assists||0}</span></div><div className="stat-item"><span className="stat-lbl">üõ°Ô∏è</span><span className="stat-val">{p.stats?.tackles||0}</span></div><div className="stat-item"><span className="stat-lbl">üß§</span><span className="stat-val">{p.stats?.saves||0}</span></div><div className="stat-item"><span className="stat-lbl">ùü®</span><span className="stat-val">{p.stats?.yellows||0}</span></div><div className="stat-item"><span className="stat-lbl">üü•</span><span className="stat-val">{p.stats?.reds||0}</span></div></div>{!isVis && <div style={{marginTop:5, display:'flex', gap:5}}>{(open || p.status==='EMPRESTIMO') && p.status!=='INTRANSFERIVEL' ? <button className="btn btn-purple" style={{width:'auto', flex:1}} onClick={()=>onNeg(p)}>NEGOCIAR</button> : <button className="btn btn-ghost" style={{width:'auto', flex:1}} disabled>BLOQUEADO</button>}{p.clause>0 && <button className="btn btn-gold" style={{width:'auto'}} onClick={()=>onPayClause(p)}>MULTA</button>}{p.contract<=1 && !p.preContract && <button className="btn btn-blue" style={{width:'auto'}} onClick={()=>onPre(p)}>PR√â</button>}</div>}</div> ))}</div>; };
        const OfferForm = ({ target, myPlayers, onSend }) => { const old = target.oldOffer || {}; const [t, setT] = useState(old.type || 'COMPRA'); const [v, setV] = useState(old.value || target.oldVal || ''); const [con, setCon] = useState(old.offerContract || '1'); const [meta, setMeta] = useState(old.meta || { sellOn: 0, wageSplit: 50, buyOpt: '', cashDir: 'PAY', installments: 1 }); const [swaps, setSwaps] = useState(old.swapPlayerIds || []); const toggleSwap = (pid) => { if(swaps.includes(pid)) setSwaps(swaps.filter(id=>id!==pid)); else if(swaps.length < 3) setSwaps([...swaps, pid]); }; return <div className="modal-bg"><div className="modal-card"><h3>Negociar {target.name}</h3><div style={{display:'flex', gap:5, marginBottom:10}}>{['COMPRA','EMPRESTIMO','TROCA'].map(x=><button key={x} className={`btn ${t===x?'btn-green':'btn-ghost'}`} onClick={()=>setT(x)}>{x}</button>)}</div><label>Valor {t==='TROCA' ? `(${meta.cashDir==='PAY'?'Eu pago':'Eu recebo'})` : ''}</label><input className="input-field" type="number" value={v} onChange={e=>setV(e.target.value)} />{t==='COMPRA' && (<div style={{background:'#222', padding:10, borderRadius:8, marginBottom:10}}><label>Parcelas (Semanas): {meta.installments || 1}</label><input type="range" min="1" max="10" value={meta.installments || 1} onChange={e=>setMeta({...meta, installments:e.target.value})} style={{width:'100%'}} />{meta.installments > 1 && <div style={{fontSize:11, color:'var(--warning)', marginTop:5}}> {meta.installments}x de {fmt(v/meta.installments)}</div>}</div>)}{t==='COMPRA' && <div><label>Revenda: {meta.sellOn}%</label><input type="range" style={{width:'100%'}} min="0" max="50" value={meta.sellOn} onChange={e=>setMeta({...meta, sellOn:e.target.value})} /></div>}{t==='EMPRESTIMO' && <div style={{background:'#333', padding:10, borderRadius:8, marginBottom:10}}><label>Divis√£o Salarial (Eu pago {meta.wageSplit}%)</label><input type="range" style={{width:'100%'}} min="0" max="100" value={meta.wageSplit} onChange={e=>setMeta({...meta, wageSplit:e.target.value})} /><label>Op√ß√£o de Compra</label><input className="input-field" type="number" value={meta.buyOpt} onChange={e=>setMeta({...meta, buyOpt:e.target.value})} /></div>}{t==='TROCA' && <div><div style={{display:'flex', gap:5}}><button className={`btn ${meta.cashDir==='PAY'?'btn-blue':'btn-ghost'}`} onClick={()=>setMeta({...meta, cashDir:'PAY'})}>PAGAR</button><button className={`btn ${meta.cashDir==='RECEIVE'?'btn-blue':'btn-ghost'}`} onClick={()=>setMeta({...meta, cashDir:'RECEIVE'})}>RECEBER</button></div><label>Jogadores (M√°x 3)</label><div style={{maxHeight:100, overflowY:'auto', background:'#222', padding:5}}>{myPlayers.map(p=><div key={p.id} onClick={()=>toggleSwap(p.id)} style={{padding:5, borderBottom:'1px solid #444', color:swaps.includes(p.id)?'var(--primary)':'#fff', cursor:'pointer'}}>{swaps.includes(p.id)?'‚úî ':''}{p.name}</div>)}</div></div>}<label>{t==='EMPRESTIMO'?'Dura√ß√£o':'Contrato'}</label><input className="input-field" type="number" value={con} onChange={e=>setCon(e.target.value)} /><button className="btn btn-green" onClick={()=>onSend(target, t, v, swaps, con, meta, old)}>ENVIAR</button></div></div>; };
        
        const OffersScreen = ({ offers, onAccept, onReject, onCounter }) => (<div><h3>Propostas</h3>{offers.map(o=><div key={o.id} className="card" style={{borderLeft:'4px solid gold'}}><b style={{color:'var(--primary)'}}>{o.playerName}</b><br/><small>De: {o.buyerName}</small><p style={{background:'#333', padding:5, borderRadius:5, whiteSpace:'pre-wrap', fontSize:11}}>{o.description}</p><div style={{display:'flex', gap:5}}><button className="btn btn-green" onClick={()=>onAccept(o)}>ACEITAR</button><button className="btn btn-blue" onClick={()=>onCounter(o)}>CONTRA</button><button className="btn btn-red" onClick={()=>onReject(o.id)}>RECUSAR</button></div></div>)}</div>);
        
        const Ranking = ({ teams, players }) => {
            const [view, setView] = useState('TEAMS'); 
            const renderTeams = () => teams.filter(t=>t.status!=='PENDING').map(t=>{ const sv=players.filter(p=>p.teamId===t.id).reduce((a,b)=>a+(b.value||0),0); return {...t, w: t.balance+sv, sv}}).sort((a,b)=>b.w-a.w).map((t,i)=><div key={t.id} className="card" style={{display:'flex', alignItems:'center', gap:10}}><b style={{fontSize:20, color:'#555', width:30}}>{i+1}</b>{t.logo?<img src={t.logo} style={{width:30, height:30, borderRadius:'50%', objectFit:'cover'}}/>:<div style={{width:30}}></div>}<div style={{flex:1}}><b>{t.name}</b><br/><small style={{color:'var(--primary)'}}>Patrim√¥nio: {fmt(t.w)}</small><br/><small style={{fontSize:9, color:'#888'}}>Caixa: {fmt(t.balance)} | Elenco: {fmt(t.sv)}</small></div></div>);
            const renderPlayers = (sortKey, label, color, isStat=true) => { let sorted = []; if(isStat) sorted = players.filter(p=>p.stats && p.stats[sortKey] > 0).sort((a,b)=>b.stats[sortKey]-a.stats[sortKey]); else sorted = players.sort((a,b)=>b[sortKey]-a[sortKey]); return sorted.map((p,i)=>(<div key={p.id} className="card" style={{display:'flex', alignItems:'center', gap:10}}><b style={{fontSize:20, color:'#555', width:30}}>{i+1}</b><div style={{flex:1}}><b>{p.name}</b> <small>({teams.find(t=>t.id===p.teamId)?.name})</small></div><div style={{fontWeight:'bold', fontSize:14, color:color}}>{label} {isStat ? p.stats[sortKey] : (sortKey==='salary' ? fmt(p[sortKey]) : p[sortKey])}</div></div>)); };
            return (<div><h3>Ranking e Estat√≠sticas</h3><div className="rank-tabs"><div className={`rank-tab ${view==='TEAMS'?'active':''}`} onClick={()=>setView('TEAMS')}>üí∞ Clubes</div><div className={`rank-tab ${view==='OVERALL'?'active':''}`} onClick={()=>setView('OVERALL')}>‚≠ê Craques</div><div className={`rank-tab ${view==='SALARY'?'active':''}`} onClick={()=>setView('SALARY')}>üí∏ Sal√°rios</div><div className={`rank-tab ${view==='GOALS'?'active':''}`} onClick={()=>setView('GOALS')}>‚öΩ Artilheiros</div><div className={`rank-tab ${view==='ASSIST'?'active':''}`} onClick={()=>setView('ASSIST')}>üëü Gar√ßons</div><div className={`rank-tab ${view==='TACKLES'?'active':''}`} onClick={()=>setView('TACKLES')}>üõ°Ô∏è Desarmes</div><div className={`rank-tab ${view==='SAVES'?'active':''}`} onClick={()=>setView('SAVES')}>üß§ Pared√µes</div><div className={`rank-tab ${view==='YEL'?'active':''}`} onClick={()=>setView('YEL')}>üü® Amarelos</div><div className={`rank-tab ${view==='RED'?'active':''}`} onClick={()=>setView('RED')}>üü• Vermelhos</div></div>{view==='TEAMS' && renderTeams()}{view==='OVERALL' && renderPlayers('overall', 'Ov:', 'var(--warning)', false)}{view==='SALARY' && renderPlayers('salary', '', 'var(--primary)', false)}{view==='GOALS' && renderPlayers('goals', '‚öΩ', '#fff')}{view==='ASSIST' && renderPlayers('assists', 'üëü', '#fff')}{view==='TACKLES' && renderPlayers('tackles', 'üõ°Ô∏è', '#fff')}{view==='SAVES' && renderPlayers('saves', 'üß§', '#fff')}{view==='YEL' && renderPlayers('yellows', 'üü®', 'yellow')}{view==='RED' && renderPlayers('reds', 'üü•', 'red')}</div>);
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ErrorBoundary><App /></ErrorBoundary>);
    </script>
</body>
</html>
